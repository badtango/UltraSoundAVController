max v2;#N vpatcher 135 44 1224 796;#P origin -52 -410;#P window setfont "Sans Serif" 9.;#P window linecount 1;#P newex 479 369 114 196617 scale 0 50 0. 500;#P newex 474 423 50 196617 cycle~;#P newex 390 449 50 196617 cycle~;#P newex 402 383 114 196617 scale 0 50 0. 30;#P newex 325 418 50 196617 cycle~;#P flonum 258 391 35 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#P newex 258 362 114 196617 scale 0 50 0. 10;#P message 769 566 27 196617 stop;#P message 697 566 65 196617 startwindow;#P flonum 804 482 81 9 0. 1. 3 3 0 0 0 221 221 221 222 222 222 0 0 0;#P flonum 712 431 54 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#P message 712 456 35 196617 \$1 30;#P newex 712 480 51 196617 line~ 200;#P newex 620 602 29 196617 dac~;#P newex 620 566 45 196617 *~ 0.15;#P newex 620 525 194 196617 lores~ 200 0.75;#B color 5;#P comment 721 511 53 196617 frequency;#P comment 707 415 114 196617 ¥Êset cutoff frequency;#P comment 629 544 39 196617 output;#P comment 698 550 100 196617 ¥Êstart/stop audio;#P user panel 688 546 123 43;#X brgb 255 255 255;#X frgb 100 202 30;#X border 2;#X rounded 0;#X shadow 0;#X done;#P newex 203 314 114 196617 scale 0 50 50 8000;#P newex 153 294 114 196617 scale 0 50 100 300;#P newex 294 460 50 196617 saw~;#P toggle 28 381 15 0;#P newex 173 484 50 196617 cycle~;#P newex 55 309 114 196617 scale 0 50 100 300;#P number 207 339 35 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#P number 156 339 35 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#P number 399 417 35 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#P number 105 339 35 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#P number 462 339 35 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#P number 411 339 35 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#P hidden newex 825 182 54 196617 r portinfo;#P user umenu 825 203 149 196647 1 64 219 1;#X setrgb 12 0 214 255 255 255 255 255 255 221 221 221 170 170 170 119 119 119 187 187 187;#X add usbserial-A900af0K;#X add Bluetooth-PDA-Sync;#X add Bluetooth-Modem;#X add Bluetooth-Modem;#X add Bluetooth-Modem;#X add 5;#X add 6;#X add 7;#P newex 643 152 36 196617 r help;#P newex 825 225 64 196617 s portselect;#B color 1;#P newex 0 130 64 196617 r portselect;#B color 1;#P newex 205 245 54 196617 s portinfo;#N vpatcher 951 44 1422 406;#P outlet 24 246 20 0;#P inlet 24 32 20 0;#P window setfont "Sans Serif" 12.;#P newex 304 196 127 196620 prepend setitem 7;#B color 1;#P newex 264 170 127 196620 prepend setitem 6;#B color 1;#P newex 224 145 127 196620 prepend setitem 5;#B color 1;#P newex 184 119 127 196620 prepend setitem 4;#B color 1;#P newex 143 197 127 196620 prepend setitem 3;#B color 1;#P newex 104 171 127 196620 prepend setitem 2;#B color 1;#P newex 64 146 127 196620 prepend setitem 1;#B color 1;#P newex 24 120 127 196620 prepend setitem 0;#B color 1;#P newex 24 89 293 196620 unpack s s s s s s s s;#B color 1;#P newex 24 59 93 196620 route port;#B color 1;#P comment 167 235 258 196620 Manages serial name data. Each port name (up to 8 \, in this case) replaces an item in the drop-down menu of the parent patch (items in drop-down are numbered 0 - 7).;#B color 1;#P connect 11 0 1 0;#P lcolor 2;#P connect 1 0 2 0;#P lcolor 2;#P connect 2 0 3 0;#P lcolor 2;#P connect 3 0 12 0;#P lcolor 2;#P connect 4 0 12 0;#P lcolor 2;#P connect 5 0 12 0;#P lcolor 2;#P connect 6 0 12 0;#P lcolor 2;#P connect 7 0 12 0;#P lcolor 2;#P connect 8 0 12 0;#P lcolor 2;#P connect 9 0 12 0;#P lcolor 2;#P connect 10 0 12 0;#P lcolor 2;#P connect 2 1 4 0;#P lcolor 2;#P connect 2 2 5 0;#P lcolor 2;#P connect 2 3 6 0;#P lcolor 2;#P connect 2 4 7 0;#P lcolor 2;#P connect 2 5 8 0;#P lcolor 2;#P connect 2 6 9 0;#P lcolor 2;#P connect 2 7 10 0;#P lcolor 2;#P pop;#P newobj 205 220 50 196617 p sorter;#B color 1;#P newex 0 161 91 196617 prepend port;#B color 1;#P button 326 103 27 0;#P comment 146 18 284 196617 Set the sample rate: between every 15ms and every 100ms.;#P number 147 37 35 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#P newex 251 103 48 196617 loadbang;#P newex 190 103 43 196617 delay 4;#P number 972 339 35 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#P number 921 339 35 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#P number 870 339 35 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#P number 819 339 35 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#P number 768 339 35 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#P number 717 339 35 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#P number 666 339 35 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#P number 615 339 35 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#P number 564 339 35 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#P number 513 339 35 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#P number 360 339 35 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#P newex 643 203 47 196617 pcontrol;#P message 643 182 30 196617 open;#N vpatcher 483 171 1200 738;#P origin 0 -1;#P window setfont "Sans Serif" 10.;#P window linecount 0;#P comment 254 165 48 196618 start;#P comment 412 162 56 196618 settings;#P button 339 190 23 5;#P comment 335 163 35 196618 help;#P window linecount 2;#P comment 33 79 493 196618 Arduino2Max uses an Arduino board programmed with the Arduino code that watches the Arduino's input pins and makes the pin data available through receive objects anywere in your patch.;#P window setfont "Sans Serif" 9.;#P window linecount 1;#P comment 549 309 61 196617 digital pins;#P comment 80 309 71 196617 analog pins;#P button 425 190 23 5;#P toggle 253 192 21 0;#N vpatcher -8 44 1262 704;#P origin 67 15;#N comlet inlet to open help patch;#P inlet 666 67 15 0;#N comlet inlet for patcher control;#P inlet 1136 64 15 0;#N comlet 1 or 0 to start/stop serial reads;#P inlet 73 39 15 0;#P pop;#P newobj 253 254 183 196617 p arduinoreader;#P window setfont "Sans Serif" 10.;#P comment 35 417 585 196618 A few notes: - Unused inputs will fluctuate between values. This is normal \, as unconected pins do this on their own.;#P window setfont "Sans Serif" 9.;#P window linecount 3;#P comment 189 343 319 196617 Once you have the above patch \, you can get Arduino's analog and digital values anywere in your own patcher by making a "receive a#" or "receive d#" object \, where # is the input pin you want to read.;#P window linecount 1;#P newex 600 336 29 196617 r d3;#P newex 544 336 29 196617 r d2;#P newex 124 336 29 196617 r a1;#P newex 67 336 29 196617 r a0;#P user led 544 364 17 17 0 150;#P user led 600 364 17 17 3 150;#P window setfont "Sans Serif" 10.;#P number 67 364 40 10 0 0 0 3 0 0 0 255 189 156 222 222 222 0 0 0;#P number 124 364 40 10 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#P window linecount 2;#P comment 35 462 655 196618 - Arduino2Max runs flawlessly on a 1.83 GHz Macbook Pro \; your mileage may vary.;#P comment 36 491 636 196618 - Patch adapted from Thomas Ouellet Fredericks' "Simple Message Sytem" example. Serial writes are possible \, but not implemented here: see the S.M.S. code. Thanks to Seejay James one the MAX list for the pull-down menu code!;#P comment 35 433 643 196618 - You may have to change your serial port to suit the port in use. Click on the yellow button to see the guts of the serial read and to make changes to how the patch talks to the serial port.;#P window setfont "Sans Serif" 9.;#P window linecount 7;#P comment 97 175 125 196617 At minimum \, you need the "arduinoreader" patcher at the right \, which does the work of reading the pins. The toggle turns serial reads from the Arduino on and off.;#P comment 495 179 111 196617 The right-hand yellow button opens the patch so that you can adjust settings \, like how often to read from the Arduino and which port to use.;#P window setfont "Sans Serif" 18.;#P window linecount 1;#P comment 33 33 163 196626 Arduino2Max;#B frgb 21 56 9;#P window setfont "Sans Serif" 10.;#P comment 218 39 334 196618 Read the 6 analog and 12 digital input pins of the Arduino into MAX.;#P user panel 18 29 670 101;#X brgb 255 247 207;#X frgb 0 0 0;#X border 0;#X rounded 0;#X shadow 0;#X done;#P hidden inlet 594 21 15 0;#P user panel 18 412 671 114;#X brgb 255 247 207;#X frgb 0 0 0;#X border 0;#X rounded 0;#X shadow 0;#X done;#P user panel 43 332 128 57;#X brgb 130 218 232;#X frgb 0 0 0;#X border 0;#X rounded 0;#X shadow 0;#X done;#P user panel 245 154 227 129;#X brgb 130 218 232;#X frgb 0 0 0;#X border 0;#X rounded 0;#X shadow 0;#X done;#P user panel 515 329 139 57;#X brgb 130 218 232;#X frgb 0 0 0;#X border 0;#X rounded 0;#X shadow 0;#X done;#P connect 17 0 14 0;#P connect 18 0 13 0;#P fasten 24 0 23 0 258 224 258 224;#P connect 30 0 23 1;#P fasten 25 0 23 2 430 226 430 226;#P connect 19 0 16 0;#P connect 20 0 15 0;#P pop;#P newobj 643 225 100 196617 p arduino2max_help;#P newex 36 1 41 196617 r onoff;#P comment 642 131 168 196617 help and patcher control stuff.;#N comlet 1 or 0 to start/stop serial reads;#P inlet 105 1 15 0;#P comment 326 83 243 196617 Print a list of serial ports to the max window;#P button 190 130 15 0;#N vpatcher 289 44 1127 677;#P outlet 99 316 15 0;#P window setfont "Sans Serif" 9.;#P window linecount 1;#P newex 107 210 31 196617 spell;#P window linecount 0;#P message 90 241 20 196617 13;#P newex 90 127 27 196617 t b l;#P inlet 90 70 15 0;#P connect 0 0 1 0;#P fasten 1 0 2 0 95 235 95 235;#P fasten 2 0 4 0 95 286 104 286;#P fasten 3 0 4 0 112 286 104 286;#P connect 1 1 3 0;#P pop;#P newobj 105 161 53 196617 p convert;#N vpatcher 995 404 1276 801;#P window setfont "Sans Serif" 9.;#P newex 137 226 64 196617 fromsymbol;#P newex 137 182 40 196617 itoa;#P newex 137 148 61 196617 zl group 78;#P newex 137 84 53 196617 sel 10 13;#N comlet out;#P outlet 137 298 26 0;#N comlet in;#P inlet 137 37 15 0;#P connect 0 0 2 0;#P fasten 2 2 3 0 184 124 142 124;#P fasten 2 1 3 0 163 124 142 124;#P connect 3 0 4 0;#P connect 4 0 5 0;#P connect 5 0 1 0;#P pop;#P newobj 105 220 73 196617 p convertback;#P newex 105 245 52 196617 route list;#P newex 105 271 881 196617 unpack i i i i i i i i i i i i i i i i i i;#P message 105 130 14 196617 r;#P toggle 105 37 15 0;#P newex 105 65 52 196617 metro 15;#P newex 105 197 110 196617 serial a 115200 8 1 0;#P message 326 161 32 196617 print;#P comment 428 557 82 196617 Index2;#P window linecount 2;#P comment 157 557 82 196617 Modulator Frequency2;#P window linecount 1;#P message 388 670 50 196617 /p3 \$1;#P newex 388 748 126 196617 udpsend 127.0.0.1 57120;#P newex 388 645 27 196617 i;#P newex 388 720 90 196617 OpenSoundControl;#P newex 388 695 30 196617 t b s;#P user dial 388 557 38 38 200 1 0 0 159 270 1 1. 203 155 96 220 220 220 119 119 119 224 224 224 0 0 0 0 0 0;#P message 116 670 50 196617 /p2 \$1;#P newex 116 748 126 196617 udpsend 127.0.0.1 57120;#P newex 116 645 27 196617 i;#P newex 116 720 90 196617 OpenSoundControl;#P newex 116 695 30 196617 t b s;#P user dial 116 557 38 38 200 1 0 0 159 270 1 1. 203 155 96 220 220 220 119 119 119 224 224 224 0 0 0 0 0 0;#P comment 292 557 82 196617 Index;#P message 252 670 50 196617 /pm3 \$1;#P newex 252 748 126 196617 udpsend 127.0.0.1 57120;#P newex 252 645 27 196617 i;#P newex 252 720 90 196617 OpenSoundControl;#P newex 252 695 30 196617 t b s;#P user dial 252 557 38 38 200 1 0 0 159 270 1 1. 203 155 96 220 220 220 119 119 119 224 224 224 0 0 0 0 0 0;#P connect 57 0 54 0;#P connect 26 0 68 0;#P connect 32 0 24 0;#P fasten 34 0 24 0 41 35 110 35;#P connect 24 0 23 0;#P connect 23 0 25 0;#P connect 25 0 29 0;#P connect 29 0 22 0;#P fasten 30 0 22 0 195 187 110 187;#P fasten 21 0 22 0 331 187 110 187;#P fasten 54 0 22 0 5 187 110 187;#P connect 22 0 28 0;#P connect 28 0 27 0;#P connect 27 0 26 0;#P connect 68 0 64 0;#P hidden connect 7 0 10 0;#P hidden connect 10 0 12 0;#P hidden connect 12 0 8 0;#P hidden connect 8 0 9 0;#P hidden connect 8 1 9 0;#P hidden connect 9 0 11 0;#P hidden connect 7 0 10 1;#P fasten 51 0 23 1 152 60 152 60;#P connect 26 1 72 0;#P connect 72 0 66 0;#P connect 64 0 69 0;#P fasten 23 0 49 0 110 92 195 92;#P connect 49 0 30 0;#P connect 26 2 73 0;#P connect 22 1 55 0;#P connect 55 0 56 0;#P connect 73 0 67 0;#P connect 90 0 69 1;#P hidden connect 0 0 3 0;#P hidden connect 3 0 5 0;#P hidden connect 5 0 1 0;#P hidden connect 1 0 2 0;#P hidden connect 1 1 2 0;#P hidden connect 2 0 4 0;#P connect 26 3 88 0;#P connect 88 0 89 0;#P hidden connect 0 0 3 1;#P connect 66 0 71 0;#P connect 89 0 90 0;#P connect 53 0 21 0;#P fasten 50 0 21 0 256 146 331 146;#P connect 90 0 71 1;#P connect 26 5 38 0;#P connect 92 0 90 1;#P hidden connect 13 0 16 0;#P hidden connect 16 0 18 0;#P hidden connect 18 0 14 0;#P hidden connect 14 1 15 0;#P hidden connect 14 0 15 0;#P hidden connect 15 0 17 0;#P connect 65 0 92 0;#P connect 91 0 65 0;#P connect 26 4 91 0;#P hidden connect 13 0 16 1;#P connect 26 6 62 0;#P connect 26 7 63 0;#P connect 94 0 93 0;#P connect 38 0 94 0;#P connect 26 8 39 0;#P connect 92 0 93 1;#P connect 26 9 40 0;#P connect 26 10 41 0;#P connect 93 0 79 0;#P connect 69 0 79 0;#P connect 71 0 79 0;#P connect 79 0 80 0;#P connect 87 0 81 0;#P connect 86 0 81 0;#P connect 80 0 81 0;#P connect 70 0 81 0;#P fasten 80 0 81 1 625 592 644 592;#P connect 59 0 36 0;#P hidden connect 36 0 37 0;#P hidden connect 37 0 35 0;#P connect 26 11 42 0;#P connect 67 0 84 0;#P connect 84 0 83 0;#P connect 83 0 82 0;#P connect 82 0 79 1;#P connect 26 12 43 0;#P connect 26 13 44 0;#P connect 85 0 79 2;#P connect 26 14 45 0;#P hidden connect 61 0 60 0;#P connect 60 0 58 0;#P connect 26 15 46 0;#P connect 26 16 47 0;#P connect 26 17 48 0;#P pop;